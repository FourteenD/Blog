(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{478:function(a,t,s){"use strict";s.r(t);var e=s(20),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"熟悉而又陌生的-npx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#熟悉而又陌生的-npx"}},[a._v("#")]),a._v(" 熟悉而又陌生的 npx")]),a._v(" "),s("p",[s("code",[a._v("npx")]),a._v(" 是 "),s("code",[a._v("npm v5.2.0")]),a._v("  版本引入的工具，其可以快速体验想要尝试的包而不必执行 "),s("code",[a._v("npm init")]),a._v("、"),s("code",[a._v("npm install")]),a._v("、"),s("code",[a._v("配置 scripts")]),a._v(" 等步骤。")]),a._v(" "),s("p",[a._v("默认情况下，它会去检查包是否存在（"),s("code",[a._v("node_modules/.bin")]),a._v(" 及环境变量 "),s("code",[a._v("$PATH")]),a._v("），如果存在则执行，不存在则临时安装再运行。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看指令的帮助信息")]),a._v("\nnpx -h\n")])])]),s("h3",{attrs:{id:"_1-常见的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-常见的作用"}},[a._v("#")]),a._v(" 1. 常见的作用")]),a._v(" "),s("ol",[s("li",[a._v("避免与全局包冲突，可以测试新的版本")]),a._v(" "),s("li",[a._v("可直接测试 github 上的模块")])]),a._v(" "),s("h3",{attrs:{id:"_2-配合参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配合参数"}},[a._v("#")]),a._v(" 2. 配合参数")]),a._v(" "),s("ol",[s("li",[s("code",[a._v("--no-install")]),a._v("：强制使用本地模块，不存在则报错")]),a._v(" "),s("li",[s("code",[a._v("--ignore-existing")]),a._v("：强制使用远程模块")])]),a._v(" "),s("h2",{attrs:{id:"认识一下-yarn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#认识一下-yarn"}},[a._v("#")]),a._v(" 认识一下 yarn")]),a._v(" "),s("blockquote",[s("p",[a._v("现在一些包默认都使用 "),s("code",[a._v("yarn")]),a._v(" 了。")])]),a._v(" "),s("h3",{attrs:{id:"_1-强制使用-yarn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-强制使用-yarn"}},[a._v("#")]),a._v(" 1. 强制使用 yarn")]),a._v(" "),s("p",[a._v("该脚本来自于 "),s("a",{attrs:{href:"https://github.com/vuejs/vue-next/blob/master/scripts/checkYarn.js",target:"_blank",rel:"noopener noreferrer"}},[a._v("Vue"),s("OutboundLink")],1),a._v("：")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[a._v("yarn\\.js$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[a._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("npm_execpath "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'\\u001b[33mThis repository requires Yarn 1.x for scripts to work properly.\\u001b[39m\\n'")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("配合上 "),s("code",[a._v("package.json")]),a._v(" 的 "),s("code",[a._v("preinstall")]),a._v(" 生命周期：")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"preinstall"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"node ./scripts/checkYarn.js"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("这样就大功告成了。")]),a._v(" "),s("h3",{attrs:{id:"_2-关于-link-的限制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-关于-link-的限制"}},[a._v("#")]),a._v(" 2. 关于 link 的限制")]),a._v(" "),s("p",[s("code",[a._v("yarn link")]),a._v(" 并不像 "),s("code",[a._v("npm link")]),a._v(" 一样可以全局使用，需要安装到指定文件夹下才可使用，当然也是有一定的方法的：")]),a._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[a._v('"link:add"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"yarn global add file:$(pwd)"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("执行 "),s("code",[a._v("yarn link:add")]),a._v(" 即可。")]),a._v(" "),s("h2",{attrs:{id:"npm-的传参"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npm-的传参"}},[a._v("#")]),a._v(" npm 的传参")]),a._v(" "),s("p",[a._v("常见的命令行传参是这样：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# POSIX 风格")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" -h\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# GNU 风格")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" --help\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或许你还见过 Java 风格的，那简直是异教徒！")]),a._v("\n")])])]),s("p",[a._v("很明显这个参数都是传递给 "),s("code",[a._v("npm")]),a._v(" 的，而在使用 "),s("code",[a._v("npm run")]),a._v(" 时我们实际希望使用的时 "),s("code",[a._v("package.json")]),a._v(" 中 "),s("code",[a._v("scripts")]),a._v(" 的命令，为了让参数传递到下层，那么自然需要一些"),s("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/commands/npm-run-script#description",target:"_blank",rel:"noopener noreferrer"}},[a._v("手段"),s("OutboundLink")],1),a._v("：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" -- --grep"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"pattern"')]),a._v("\n")])])]),s("p",[a._v("在正常的传参前增加 "),s("code",[a._v("--")]),a._v(" 即可达成。")]),a._v(" "),s("h2",{attrs:{id:"从模板到-create-命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从模板到-create-命令"}},[a._v("#")]),a._v(" 从模板到 create 命令")]),a._v(" "),s("p",[a._v("常常会根据模板创建项目：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# yarn")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" create example-app "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" create example-app "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npx")]),a._v("\nnpx create-example-app "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"_1-查看帮助"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看帮助"}},[a._v("#")]),a._v(" 1. 查看帮助")]),a._v(" "),s("p",[a._v("简单看下 "),s("code",[a._v("create")]),a._v(" 命令该怎么用。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看帮助")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" create -h\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" init "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--force"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-f"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("--yes"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-y"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("--scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" init "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("@scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("same as "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("npx "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("@scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/create"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" init "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("@scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("same as "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),a._v("npx "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("@scope"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("create-"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\naliases: create, innit\n")])])]),s("p",[a._v("可以发现是 "),s("code",[a._v("init")]),a._v(" 的别名，过去常用 "),s("code",[a._v("npm init -y")]),a._v(" 来生成 "),s("code",[a._v("package.json")]),a._v("，这是因为匹配到了第一项；而在后面添加 "),s("code",[a._v("name")]),a._v(" 时，则匹配到了其他项。")]),a._v(" "),s("h3",{attrs:{id:"_2-一个小测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-一个小测试"}},[a._v("#")]),a._v(" 2. 一个小测试")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" create some-example-app\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm ERR! 404  'create-some-example-app@latest' is not in the npm registry.")]),a._v("\n")])])]),s("p",[a._v("提示是 "),s("code",[a._v("create-some-example-app@latest")]),a._v("，再回顾下前面的查看帮助，可以发现是在前面增加了 "),s("code",[a._v("create")]),a._v(" 字段。")]),a._v(" "),s("p",[a._v("那我们常用的 "),s("code",[a._v("yarn create @vitejs/app")]),a._v(" 呢？前往 "),s("code",[a._v("npm")]),a._v(" 可以看到有一个 "),s("a",{attrs:{href:"https://www.npmjs.com/package/@vitejs/create-app",target:"_blank",rel:"noopener noreferrer"}},[a._v("@vitejs/create-app"),s("OutboundLink")],1),a._v("，符合查看帮助的最后一项。")]),a._v(" "),s("h2",{attrs:{id:"版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[a._v("#")]),a._v(" 版本")]),a._v(" "),s("p",[a._v("一个标准的版本号："),s("code",[a._v("MAJOR.MINOR.PATCH")]),a._v("，版本规范参考 "),s("a",{attrs:{href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("semver"),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("p",[a._v("除此外还有先行版本，格式为 "),s("code",[a._v("MAJOR.MINOR.PATCH-FLAG.N")]),a._v("，"),s("code",[a._v("FLAG")]),a._v(" 常见的有 "),s("code",[a._v("alpha(内测)")]),a._v("、"),s("code",[a._v("beta")]),a._v("，在 Vue 中又认识了 "),s("code",[a._v("rc")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" version prerelease --preid"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("alpha\n")])])]),s("h3",{attrs:{id:"_1-打-tag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-打-tag"}},[a._v("#")]),a._v(" 1. 打 tag")]),a._v(" "),s("p",[a._v("即使你的版本是 "),s("code",[a._v("-alpha.0")]),a._v(" 的先行版本，你在发布时直接指定为 "),s("code",[a._v("npm publish")]),a._v("，默认也是 "),s("code",[a._v("latest")]),a._v(" 的标签，这会作为最新版被用户下载。")]),a._v(" "),s("p",[a._v("如果发错了标签不用担心，可以使用 "),s("a",{attrs:{href:"https://docs.npmjs.com/cli/v7/commands/npm-dist-tag",target:"_blank",rel:"noopener noreferrer"}},[a._v("npm dist-tag"),s("OutboundLink")],1),a._v(" 进行修复：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" dist-tag "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" some-package@1.1.0-beta.0 beta\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" dist-tag "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" some-package@1.0.0 latest\n")])])]),s("h3",{attrs:{id:"_2-配合-git"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配合-git"}},[a._v("#")]),a._v(" 2. 配合 git")]),a._v(" "),s("p",[a._v("一般我们还会根据 version 变更打标签推送到 "),s("code",[a._v("git")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# major、minor、patch")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# premajor、preminor、prepatch、prerelease --preid=<alpha|beta|rc>")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" version patch -m "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"chore: 发布 tag %s"')]),a._v("\n")])])]),s("h2",{attrs:{id:"回归-npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回归-npm"}},[a._v("#")]),a._v(" 回归 npm")]),a._v(" "),s("p",[a._v("一些常用命令：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看安装在全局 npm 包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" list -g --depth "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# npm install 失败时强制清理")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" cache clean --force\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);